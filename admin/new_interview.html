<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>PERCHA | Admin</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/admin_css">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="/admin_js/uploadfile_interview.js"></script>

        <link href='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.css' rel='stylesheet'>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/mode/htmlmixed/htmlmixed.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/mode/javascript/javascript.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/mode/xml/xml.js'></script>
    </head>
    
    <body>
      <div class="container mt-5 p-5">
        <h1 class="display-1">ADD Interview</h1>
        <h5 class="mb-3">
          <a class="mr-5" href="/admin_all"><i>all</i></a>
          <a class="mr-5" href="/admin_new_what"><i>add</i></a>
          <a class="mr-5" href="/admin_delete"><i>delete</i></a>
        </h5>
        <form>
          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>TITLE</h3>
            </div>
            <div class="col-8 p-3">
              <input class="form-control form-control-lg" type="text" id="title" placeholder="">
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>DESCRIPTION</h3>
            </div>
            <div class="col-8 p-3">
              <input class="form-control form-control-lg" type="text" id="descr" placeholder="">
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>AUTHOR</h3>
            </div>
            <div class="col-8 p-3">
              <input class="form-control form-control-lg" type="text" id="author" placeholder="">
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>LOCATION</h3>
            </div>
            <div class="col-8 p-3">
              <input class="form-control form-control-lg" type="text" id="location" placeholder="">
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>DATE</h3>
            </div>
            <div class="col-8 p-3">
              <input class="form-control form-control-lg" type="date" id="date" placeholder="">
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>MAIN TEXT</h3>
            </div>
            <div class="col-8 p-3">
              <textarea class="form-control form-control-lg" type="text" id="main_text" placeholder="" rows="20"></textarea>
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>SPOTIFY</h3>
            </div>
            <div class="col-8 p-3">
              <textarea class="form-control form-control-lg" type="text" id="spotify" placeholder="" rows="5"></textarea>
            </div>
          </div>

          <div class="row bg-lighter5 p-3" id="FadeIn">
            <div class="col-4 text-right pt-3">
              <h3>IMAGE</h3>
              <p>(Only add 1 image)</p>
            </div>
            <div class="col-8 p-3">
              <section class="active">
              <div class="images">
                <div class="pic text-primary" style="background-color: rgba(220, 220, 220, 0.438) !important;">
                  <a><i><b>Add</b></i></a>
                </div>
              </div>
              </section>

              <div class="wrapper">
                <footer>
                  <ul>
                    <li><span id="reset">reset</span></li>
                    <li><span id="send">send</span></li>
                  </ul>
                </footer> 
              </div>

            </div>
          </div>

        </form>
      

      </div>

      <!-- TEXT EDITOR STUFF-->
      <div class="HTMLContainer" style="display: none;"></div>
      <textarea type="text" id="main_text_html" rows="5" style="display: none;"></textarea>



    </body>

    <script src='https://cdn.tiny.cloud/1/qagffr3pkuv17a8on1afax661irst1hbr4e6tbv888sz91jc/tinymce/5/tinymce.min.js'></script>
    <script>

tinymce.init({
  selector: "#main_text",
  height: 400,
  plugins: [
    "advlist autolink lists link image charmap print preview anchor",
    "searchreplace visualblocks code fullscreen",
    "insertdatetime media table paste emoticons"
  ],
  toolbar:
    "styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image emoticons",
  skin: "small",
  icons: "",
  setup: function (editor) {
    editor.on("keyup", function (e) {
      updateHTML(editor.getContent());
      console.log(document.getElementById("main_text_html").value); // final HTML we need
      
    });
    editor.on("change", function (e) {
      updateHTML(editor.getContent());
    });
  }
});

function updateHTML(content) {
  cmeditor.getDoc().setValue(content);
  document.getElementById("main_text_html").value = content;
}

function updateEditor() {
  if (!tinymce.activeEditor.hasFocus()) {
    tinymce.activeEditor.setContent(cmeditor.getDoc().getValue());
  }
}

var HTMLContainer = document.querySelector(".HTMLContainer");

var cmeditor = CodeMirror(HTMLContainer, {
  lineNumbers: true,
  mode: "htmlmixed"
});

cmeditor.on("change", (editor) => {
  updateEditor();
});

    </script>
</html>